{"version":3,"sources":["components/upload/upload.module.less","components/about/about.module.less","routers/style/login.module.less","layout/config/index.ts","layout/style/breadcrumb.module.less","utils/axios.tsx","config/smms.api.ts","components/user/userLogin.tsx","components/upload/upload.tsx","components/about/about.tsx","routers/login.tsx","routers/home.tsx","routers/about.tsx","layout/breadcrumb.tsx","layout/mainLayout.tsx","utils/privateRoutes.tsx","App.tsx","serviceWorker.ts","index.tsx","layout/config/layout.config.ts","layout/style/mainLayout.module.less"],"names":["module","exports","console","log","axios","defaults","interceptors","request","use","config","error","message","toString","Promise","reject","response","SMMSAPI","smmsLogin","user","post","smmsHistory","get","NormalLoginForm","smmsAPI","handleSubmit","e","preventDefault","props","form","validateFields","err","values","a","loginUser","username","password","userSuccess","data","success","warn","getFieldDecorator","this","onSubmit","className","Item","rules","required","prefix","type","style","color","placeholder","valuePropName","initialValue","htmlType","React","LoginForm","create","name","Search","Dragger","SMMSUpload","fileList","visible","uploadUrl","isCopy","configImage","_this","showUploadList","action","multiple","format","onStart","file","getBase64","then","res","imgItem","thumbUrl","status","_","concat","setState","onSuccess","ret","length","url","onError","onProgress","percent","nowPercent","Number","customRequest","exReq","formData","FormData","append","axiosConfig","onUploadProgress","upload","Math","round","loaded","total","toFixed","catch","abort","resolve","reader","FileReader","readAsDataURL","onload","result","onerror","copyUrl","copy","debug","handleOk","handleCancel","Style","accept","listType","title","onOk","onCancel","footer","description","showIcon","marginTop","enterButton","size","defaultValue","onSearch","value","Title","Paragraph","SMMSAbout","Component","JOYSMMSLogin","justify","align","JOYSMMSHome","JOYSMMSAbout","breadcrumbNameMap","layoutConfig","breadcrumb","SMMSbreadcrumb","withRouter","pathSnippets","location","pathname","split","filter","i","extraBreadcrumbItems","map","index","slice","join","key","to","breadcrumbItems","Header","Footer","Content","MainLayout","children","theme","mode","defaultSelectedKeys","selectable","selectedKeys","link","findIndex","menu","checkSelectKeys","menuItem","PrivateRoute","component","isSignIn","rest","render","App","Fragment","exact","path","Boolean","window","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","icon"],"mappings":"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","file":"static/js/main.fd987f63.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"upload_container\":\"src-components-upload-upload-module__upload_container--30Aws\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"about_container\":\"src-components-about-about-module__about_container--2NomT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"src-routers-style-login-module__Container--3-C3O\",\"Layout\":\"src-routers-style-login-module__Layout--3NAgF\"};","export * from \"./layout.config\";\r\nexport * from \"./layout.interface\";\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"demo\":\"src-layout-style-breadcrumb-module__demo--2Y8Qu\",\"demo-nav\":\"src-layout-style-breadcrumb-module__demo-nav--16UlQ\",\"app-list\":\"src-layout-style-breadcrumb-module__app-list--1ZpkB\"};","import axios from \"axios\";\r\nimport { message } from \"antd\";\r\n// import { axiosConfig } from \"../config\";\r\n// // axios.defaults.baseURL = axiosConfig.baseURL;\r\n// // axios.defaults.headers = axiosConfig.headers;\r\n// // axios.defaults.withCredentials = axiosConfig.withCredentials\r\nif (process.env.NODE_ENV === \"development\") {\r\n  console.warn(\"API环境:\" + axios.defaults.baseURL);\r\n}\r\nconsole.log(axios.defaults);\r\n// 请求拦截\r\n// axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\r\naxios.interceptors.request.use(\r\n  config => {\r\n    // 加载\r\n    return config;\r\n  },\r\n  error => {\r\n    message.error(error.toString());\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// 响应拦截\r\naxios.interceptors.response.use(\r\n  response => {\r\n    return response;\r\n  },\r\n  error => {\r\n    // 错误提醒\r\n    try {\r\n      console.log(error);\r\n\r\n      message.error(error.toString());\r\n      return Promise.reject(error);\r\n    } catch (error) {\r\n      console.log(error);\r\n      message.error(error.toString());\r\n    }\r\n  }\r\n);\r\n\r\nexport default axios;\r\n","import axios from \"../utils/axios\";\r\nimport { IUserLogin } from \"../interfaces\";\r\n\r\nexport class SMMSAPI {\r\n  public smmsLogin = (user: IUserLogin) => {\r\n    return axios.post(\"api/v2/token\", user);\r\n  };\r\n  public smmsHistory = () => {\r\n    return axios.get(\"api/v2/history\");\r\n  };\r\n}\r\n","import { Form, Icon, Input, Button, Checkbox, message } from \"antd\";\r\nimport * as React from \"react\";\r\nimport { SMMSAPI } from \"../../config/smms.api\";\r\nimport { IUserLogin } from \"../../interfaces/index\";\r\n\r\nclass NormalLoginForm extends React.Component {\r\n  private smmsAPI = new SMMSAPI();\r\n  handleSubmit = (e: any) => {\r\n    e.preventDefault();\r\n    let form: any = this.props;\r\n    form.form.validateFields(async (err: any, values: IUserLogin) => {\r\n      const loginUser = {\r\n        username: values.username,\r\n        password: values.password\r\n      };\r\n      if (!err) {\r\n        try {\r\n          const userSuccess = await this.smmsAPI.smmsLogin(loginUser);\r\n          console.log(userSuccess);\r\n          if (!userSuccess.data.success) {\r\n            message.warn(userSuccess.data.message);\r\n          }\r\n\r\n          // const userSuccessInfo: IUserBody = userSuccess.data;\r\n          // console.log(userSuccessInfo);\r\n\r\n          // message.success(`你好${loginUser.username}，欢迎回来~！`);\r\n        } catch (userError) {\r\n          message.warn(userError.response);\r\n        }\r\n      } else {\r\n        console.log(err);\r\n      }\r\n    });\r\n  };\r\n\r\n  render() {\r\n    let props: any = this.props;\r\n    const { getFieldDecorator } = props.form;\r\n    return (\r\n      <Form onSubmit={this.handleSubmit} className=\"login-form\">\r\n        <Form.Item>\r\n          {getFieldDecorator(\"username\", {\r\n            rules: [{ required: true, message: \"请输入用户名\" }]\r\n          })(\r\n            <Input\r\n              prefix={<Icon type=\"user\" style={{ color: \"rgba(0,0,0,.25)\" }} />}\r\n              placeholder=\"Username\"\r\n            />\r\n          )}\r\n        </Form.Item>\r\n        <Form.Item>\r\n          {getFieldDecorator(\"password\", {\r\n            rules: [{ required: true, message: \"请输入密码\" }]\r\n          })(\r\n            <Input\r\n              prefix={<Icon type=\"lock\" style={{ color: \"rgba(0,0,0,.25)\" }} />}\r\n              type=\"password\"\r\n              placeholder=\"Password\"\r\n            />\r\n          )}\r\n        </Form.Item>\r\n        <Form.Item>\r\n          {getFieldDecorator(\"remember\", {\r\n            valuePropName: \"checked\",\r\n            initialValue: true\r\n          })(<Checkbox>记住我</Checkbox>)}\r\n          <span className=\"login-form-forgot\">忘记密码</span>\r\n          <Button\r\n            type=\"primary\"\r\n            htmlType=\"submit\"\r\n            className=\"login-form-button\"\r\n          >\r\n            Log in\r\n          </Button>\r\n          Or <span>注册</span>\r\n        </Form.Item>\r\n      </Form>\r\n    );\r\n  }\r\n}\r\n\r\nexport const LoginForm = Form.create({ name: \"normal_login\" })(NormalLoginForm);\r\n","import * as React from \"react\";\r\nimport { Upload, Icon, message, Modal, Button, Alert, Input } from \"antd\";\r\nimport _ from \"lodash\";\r\nimport axios from \"axios\";\r\nimport { RcUpload, CustomRequest, SMMS_V2_PicReq } from \"../../interfaces\";\r\nimport { SMMSAPI } from \"../../config\";\r\nimport * as Style from \"./upload.module.less\";\r\nimport { UploadFile } from \"antd/lib/upload/interface\";\r\nimport copy from \"copy-to-clipboard\";\r\nconst Search = Input.Search;\r\nconst { Dragger } = Upload;\r\n\r\nexport class SMMSUpload extends React.Component {\r\n  private SMMSAPI = new SMMSAPI();\r\n  private fileList: Array<UploadFile> = [];\r\n  private visible: boolean = false;\r\n  private uploadUrl: string = \"\";\r\n  private isCopy: boolean = false;\r\n  private configImage = () => {\r\n    const _this = this;\r\n    let config: CustomRequest = {\r\n      name: \"file\",\r\n      showUploadList: true,\r\n      action: \"api/v2/upload\",\r\n      multiple: false,\r\n      data: { format: \"json\" },\r\n      // headers: {\r\n      //   Authorization: \"$prefix $token\"\r\n      // },\r\n      onStart(file: UploadFile) {\r\n        console.log(\"statr\");\r\n\r\n        _this.getBase64(file).then(res => {\r\n          let imgItem: UploadFile = file;\r\n          imgItem.thumbUrl = res as string;\r\n          imgItem.status = \"uploading\";\r\n          console.log(res);\r\n          _this.fileList = _.concat(_this.fileList, [imgItem]);\r\n          console.log(_this.fileList);\r\n          _this.setState({});\r\n        });\r\n      },\r\n      onSuccess(ret: SMMS_V2_PicReq, file: UploadFile) {\r\n        console.log(ret);\r\n        if (ret.success) {\r\n          _this.fileList[_this.fileList.length - 1].url = ret.data.url;\r\n          _this.fileList[_this.fileList.length - 1].status = \"success\";\r\n          _this.uploadUrl = ret.data.url;\r\n          _this.visible = false;\r\n          console.log(\"onSuccess\");\r\n          _this.setState({});\r\n        } else {\r\n          message.warn(ret.message);\r\n        }\r\n      },\r\n      onError(err: Error) {\r\n        console.log(\"onError\", err);\r\n      },\r\n      onProgress(percent: { percent: any }, file: UploadFile) {\r\n        console.log(\"onProgress\", `${percent.percent}%`, file.name);\r\n        const nowPercent: number = Number(percent.percent);\r\n\r\n        _this.fileList[_this.fileList.length - 1].percent = nowPercent;\r\n        if (nowPercent === 100) {\r\n          _this.fileList[_this.fileList.length - 1].status = \"done\";\r\n        }\r\n        _this.setState({});\r\n      },\r\n      customRequest(exReq: RcUpload) {\r\n        let formData = new FormData();\r\n        if (exReq.data) {\r\n          //   Object.keys(exReq.data).forEach(key => {\r\n          //     formData.append(key, exReq.data[key]);\r\n          //     console.log(formData);\r\n          //   });\r\n          formData.append(\"smfile\", exReq.file);\r\n        }\r\n        // let axiosHeaders = exReq.headers;\r\n        const axiosConfig = {\r\n          // withCredentials: true,\r\n          // axiosHeaders,\r\n          onUploadProgress: (upload: { total: any; loaded: any }) => {\r\n            exReq.onProgress(\r\n              {\r\n                percent: Math.round(\r\n                  (upload.loaded / upload.total) * 100\r\n                ).toFixed(2)\r\n              },\r\n              exReq.file\r\n            );\r\n          }\r\n        };\r\n\r\n        axios\r\n          .post(exReq.action, formData, axiosConfig)\r\n          .then(({ data: response }) => {\r\n            exReq.onSuccess(response, exReq.file);\r\n          })\r\n          .catch(exReq.onError);\r\n\r\n        return {\r\n          abort() {\r\n            console.log(\"upload progress is aborted.\");\r\n          }\r\n        };\r\n      }\r\n    };\r\n    return config;\r\n  };\r\n\r\n  private getBase64 = (file: any) => {\r\n    return new Promise((resolve, reject) => {\r\n      const reader = new FileReader();\r\n      reader.readAsDataURL(file);\r\n      reader.onload = () => resolve(reader.result);\r\n      reader.onerror = error => reject(error);\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className={Style.upload_container}>\r\n        <Dragger\r\n          accept=\"image/*\"\r\n          {...this.configImage()}\r\n          listType=\"picture\"\r\n          fileList={this.fileList}\r\n        >\r\n          <p className=\"ant-upload-drag-icon\">\r\n            <Icon type=\"inbox\" />\r\n          </p>\r\n          <p className=\"ant-upload-text\">点击或拖动文件到该区域来进行上传</p>\r\n          <p className=\"ant-upload-hint\">\r\n            5 MB max per file. 1[0] files max per request.\r\n          </p>\r\n        </Dragger>\r\n        <Modal\r\n          title=\"系统消息:上传成功!\"\r\n          visible={this.visible}\r\n          onOk={this.handleOk}\r\n          onCancel={this.handleCancel}\r\n          footer={\r\n            [\r\n              // <Button key=\"back\" onClick={this.handleCancel}>\r\n              //   Return\r\n              // </Button>,\r\n              // <Button key=\"submit\" type=\"primary\"   onClick={this.handleOk}>\r\n              //   Submit\r\n              // </Button>,\r\n            ]\r\n          }\r\n        >\r\n          {this.isCopy ? (\r\n            <Alert\r\n              message=\"成功复制到粘贴板!\"\r\n              description=\"现在您可以将链接粘贴到其他地方:)\"\r\n              type=\"success\"\r\n              showIcon\r\n            />\r\n          ) : (\r\n            <Alert\r\n              message=\"您可以在此处复制该图片链接\"\r\n              description=\"点击[复制]按钮,一键复制到粘贴板.\"\r\n              type=\"info\"\r\n              showIcon\r\n            />\r\n          )}\r\n\r\n          <Search\r\n            style={{ marginTop: \"20px\" }}\r\n            enterButton={<Icon type=\"copy\" />}\r\n            size=\"large\"\r\n            defaultValue={this.uploadUrl}\r\n            onSearch={value => this.copyUrl(value)}\r\n          />\r\n        </Modal>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private copyUrl = (url: string) => {\r\n    copy(this.uploadUrl, {\r\n      debug: true,\r\n      message: \"Press #{key} to copy\"\r\n    });\r\n    this.isCopy = true;\r\n    this.setState({});\r\n  };\r\n\r\n  private handleOk = () => {\r\n    this.visible = false;\r\n    this.setState({});\r\n  };\r\n\r\n  private handleCancel = () => {\r\n    this.visible = !this.visible;\r\n    this.setState({});\r\n  };\r\n  componentDidMount() {}\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Typography, Divider, Alert } from \"antd\";\r\nimport * as Style from \"./about.module.less\";\r\n\r\nconst { Title, Paragraph } = Typography;\r\nexport class SMMSAbout extends Component {\r\n  render() {\r\n    return (\r\n      <Typography className={Style.about_container}>\r\n        <Title>关于JoyNop.SMMS图床</Title>\r\n        <Divider />\r\n        <Paragraph>\r\n          <Alert\r\n            message=\"JoyNop.SM.MS .\"\r\n            description={\r\n              <div>\r\n                <p>\r\n                  SM.MS免费图床仅供分享图片使用，我们保留随时删除图片并举报上传违规图片者的权利.\r\n                </p>\r\n                <p>\r\n                  JoyNop.SM.MS为广大用户提供一个更加便捷的SM.MS上传途径.JoyNop本身不提供任何图片业务\r\n                </p>\r\n              </div>\r\n            }\r\n            type=\"success\"\r\n            showIcon\r\n          />\r\n          <Divider />\r\n          <Alert\r\n            message={\"严禁上传及分享如下类型的图片\"}\r\n            description={\r\n              <ul>\r\n                <li>含有色情、暴力、宣扬恐怖主义的图片</li>\r\n                <li> 侵犯版权、未经授权的图片</li>\r\n                <li>其他违反中华人民共和国法律的图片</li>\r\n                <li> 其他违反香港法律的图片 </li>\r\n              </ul>\r\n            }\r\n            type=\"error\"\r\n            showIcon\r\n          />\r\n\r\n          <Divider />\r\n          <Alert\r\n            message=\"其他\"\r\n            description={\r\n              \"违规图片投诉邮箱 abuse@loli.net Telegram 群 @smms_images\"\r\n            }\r\n            type=\"info\"\r\n            showIcon\r\n          />\r\n        </Paragraph>\r\n      </Typography>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { LoginForm } from \"../components\";\r\nimport { Card, Layout, Row, Col } from \"antd\";\r\nimport * as Style from \"./style/login.module.less\";\r\nexport class JOYSMMSLogin extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Layout className={Style.Layout}>\r\n          <Row type=\"flex\" justify=\"center\" align=\"top\">\r\n            <Col>\r\n              <Card title=\"登录\">\r\n                <LoginForm />\r\n              </Card>\r\n            </Col>\r\n          </Row>\r\n        </Layout>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { SMMSUpload } from \"../components\";\r\n\r\nexport class JOYSMMSHome extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <SMMSUpload />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { SMMSAbout } from \"../components\";\r\nexport class JOYSMMSAbout extends Component {\r\n  render() {\r\n    return <SMMSAbout />;\r\n  }\r\n}\r\n","import { Link, withRouter } from \"react-router-dom\";\r\nimport { Breadcrumb } from \"antd\";\r\nimport * as React from \"react\";\r\nimport { layoutConfig } from \"./config\";\r\nimport * as Style from \"./style/breadcrumb.module.less\";\r\n\r\nconst breadcrumbNameMap: any = layoutConfig.breadcrumb;\r\nexport const SMMSbreadcrumb = withRouter(props => {\r\n  const { location } = props;\r\n  const pathSnippets = location.pathname.split(\"/\").filter(i => i);\r\n  const extraBreadcrumbItems = pathSnippets.map((_, index) => {\r\n    const url = `/${pathSnippets.slice(0, index + 1).join(\"/\")}`;\r\n    return (\r\n      <Breadcrumb.Item key={url}>\r\n        <Link to={url}>{breadcrumbNameMap[url]}</Link>\r\n      </Breadcrumb.Item>\r\n    );\r\n  });\r\n  const breadcrumbItems = [\r\n    <Breadcrumb.Item key=\"home\">\r\n      <Link to=\"/\">Home</Link>\r\n    </Breadcrumb.Item>\r\n  ].concat(extraBreadcrumbItems);\r\n  return (\r\n    <div className={Style.demo}>\r\n      <Breadcrumb>{breadcrumbItems}</Breadcrumb>\r\n    </div>\r\n  );\r\n});\r\n","import { Layout, Menu } from \"antd\";\r\nimport * as React from \"react\";\r\nimport * as Style from \"./style/mainLayout.module.less\";\r\nimport { layoutConfig } from \"./config/layout.config\";\r\n// import { Ilayout } from \"./config/layout.interface\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport _ from \"lodash\";\r\nimport { SMMSbreadcrumb } from \"../layout/breadcrumb\";\r\n\r\nconst { Header, Footer, Content } = Layout;\r\n\r\nexport class MainLayout extends React.Component {\r\n  // private layoutConfig = new layoutConfig();\r\n\r\n  render() {\r\n    const props: any = this.props;\r\n    const { children, location } = props;\r\n\r\n    const checkSelectKeys = (link: string) => {\r\n      const key = _.findIndex(layoutConfig.menu, { link: link });\r\n      console.log(key);\r\n      const selectedKeys: Array<string> = [key.toString()];\r\n      return selectedKeys;\r\n    };\r\n\r\n    return (\r\n      <Layout className=\"layout\">\r\n        <Header>\r\n          <div className=\"logo\" />\r\n          <Menu\r\n            theme=\"dark\"\r\n            mode=\"horizontal\"\r\n            defaultSelectedKeys={[\"0\"]}\r\n            className={Style.menu}\r\n            selectable\r\n            selectedKeys={checkSelectKeys(location.pathname)}\r\n          >\r\n            {layoutConfig.menu.map((menuItem, index) => (\r\n              <Menu.Item key={index}>\r\n                <NavLink to={menuItem.link}>{menuItem.name}</NavLink>\r\n              </Menu.Item>\r\n            ))}\r\n          </Menu>\r\n        </Header>\r\n        <Content className={Style.content_container}>\r\n          <SMMSbreadcrumb />\r\n          <div className={Style.content}>{children}</div>\r\n        </Content>\r\n        <Footer className={Style.footer}>\r\n          SMMS ©2019 CREATED BY JOYNOP.COM\r\n        </Footer>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\n","import { Route, Redirect, RouteProps } from \"react-router-dom\";\r\nimport * as React from \"react\";\r\n\r\nexport interface PrivateRouteProps extends RouteProps {\r\n  component: React.ComponentType<any>;\r\n  isSignIn: boolean;\r\n  // isIndex?:boolean\r\n}\r\n\r\nexport const PrivateRoute = (props: PrivateRouteProps) => {\r\n  let { component: Component, isSignIn, ...rest } = props;\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={props =>\r\n        isSignIn === true ? <Component {...props} /> : <Redirect to=\"/login\" />\r\n      }\r\n    />\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport \"./App.less\";\r\nimport { JOYSMMSLogin, JOYSMMSHome, JOYSMMSAbout } from \"./routers/index\";\r\n\r\nimport { HashRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport { MainLayout } from \"./layout\";\r\nimport { PrivateRoute } from \"./utils/privateRoutes\";\r\n\r\nclass App extends React.Component {\r\n  render() {\r\n    const isLogin = true;\r\n    return (\r\n      <React.Fragment>\r\n        <Router>\r\n          <Switch>\r\n            <Route exact path=\"/login\" component={JOYSMMSLogin} />\r\n            {/* <Route exact path='/signin' component={DbCloudSignin} /> */}\r\n            <MainLayout {...this.props}>\r\n              <PrivateRoute\r\n                isSignIn={isLogin}\r\n                exact\r\n                path=\"/\"\r\n                component={JOYSMMSHome}\r\n              />\r\n              <PrivateRoute\r\n                isSignIn={isLogin}\r\n                exact\r\n                path=\"/about\"\r\n                component={JOYSMMSAbout}\r\n              />\r\n            </MainLayout>\r\n            <Route\r\n              render={() => {\r\n                return <p>Not Found</p>;\r\n              }}\r\n            />\r\n          </Switch>\r\n        </Router>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import { Ilayout } from \"./layout.interface\";\r\nexport class layoutConfig {\r\n  public static menu: Array<Ilayout> = [\r\n    { name: \"Home\", link: \"/\", icon: \"home\" },\r\n    { name: \"History\", link: \"/history\", icon: \"history\" },\r\n    { name: \"About\", link: \"/about\", icon: \"about\" },\r\n    { name: \"Contact\", link: \"/contact\", icon: \"contact\" }\r\n    // { name: \"反馈\", link: \"/feedback\", icon: \"bug\" }\r\n  ];\r\n\r\n  public static breadcrumb = {\r\n    \"/\": \"/\",\r\n    \"/contact\": \"Contact\",\r\n    \"/history\": \"History\",\r\n    \"/about\": \"About\",\r\n    \"/apps/1/detail\": \"Detail\",\r\n    \"/apps/2/detail\": \"Detail\"\r\n  };\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content_container\":\"src-layout-style-mainLayout-module__content_container--24xa4\",\"content\":\"src-layout-style-mainLayout-module__content--2jakz\",\"breadcrumb\":\"src-layout-style-mainLayout-module__breadcrumb--29OKW\",\"menu\":\"src-layout-style-mainLayout-module__menu--32KRr\",\"footer\":\"src-layout-style-mainLayout-module__footer--AEYpB\"};"],"sourceRoot":""}